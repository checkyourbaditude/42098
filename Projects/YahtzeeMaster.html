<!DOCTYPE html>
<html>
<head>
<style>
	div.dice{
		float:left;
		width:33px;
		background:#F5F5F5;
		border:#999 1px solid;
		padding:10px;
		font-size:24px;
		text-align:center;
		margin:0px 0px 0px 5px;
	}
	#mechRoll {
		border-style: dotted;
		text-align: center;
		float:left;
	}
	#rollButton{
		margin: 5px;
	}
	#goToGrading {
		margin: 5px;
	}
	#rollMechButtons {
		text-align: center;
	}
	#grading {
		border-style: dotted;
		float:left;
	}
	#radioOptions {
		font-weight: bold;
	}
	#Scratch {
		color: red;
	}
	#Used {
		color: grey;
	}
</style>
<script>
//variable to hold the number of rolls user has used
var rollCnt=0;
var turnNum=1;

//make scorecard objects
//upper section
var ACES=new scoreObj("Aces", false, 0);
var TWOS=new scoreObj("Twos", false, 0);
var THREES=new scoreObj("Threes", false, 0);
var FOURS=new scoreObj("Fours", false, 0);
var FIVES=new scoreObj("Fives", false, 0);
var SIXES=new scoreObj("Sixes", false, 0);

//lower section
var KIND3=new scoreObj("Kind3", false, 0);
var KIND4=new scoreObj("Kind4", false, 0);
var FHOUSE=new scoreObj("Fhouse", false, 0);
var SS=new scoreObj("SS", false, 0);
var LS=new scoreObj("LS", false, 0);
var YAHTZEE=new scoreObj("Yahtzee", false, 0);
var CHANCE=new scoreObj("Chance", false, 0);

//an array of objects to hold scores
var SCORE_CARD={
	ACES,
	TWOS,
	THREES,
	FOURS,
	FIVES,
	SIXES,
	KIND3,
	KIND4,
	FHOUSE,
	SS,
	LS,
	YAHTZEE,
	CHANCE,
}



//constructor for score card, possibly add functions to the score section??
function scoreObj(name,isUsed,score){
	this.name=name;
	this.isUsed=isUsed;
	this.score=score;
}

function rollDice(){
	//If die 1 is not checked, re roll
    if(document.getElementById("d1").checked==false){
	    var die1 = document.getElementById("die1");
	    var d1 = Math.floor(Math.random() * 6) + 1;
	    die1.innerHTML = d1;
	}
	//If die 2 is not checked, re roll
	if(document.getElementById("d2").checked==false){
	    var die2 = document.getElementById("die2");
	    var d2 = Math.floor(Math.random() * 6) + 1;
	    die2.innerHTML = d2;
	}
	//If die 3 is not checked, re roll
	if(document.getElementById("d3").checked==false){
	    var die3 = document.getElementById("die3");
	    var d3 = Math.floor(Math.random() * 6) + 1;
	    die3.innerHTML = d3;
	}
	//If die 4 is not checked, re roll
	if(document.getElementById("d4").checked==false){
	    var die4 = document.getElementById("die4");
	    var d4 = Math.floor(Math.random() * 6) + 1;
	    die4.innerHTML = d4;
	}
	//If die 5 is not checked, re roll
	if(document.getElementById("d5").checked==false){
	    var die5 = document.getElementById("die5");
	    var d5 = Math.floor(Math.random() * 6) + 1;
	    die5.innerHTML = d5;
	}
	rollCnt++;

	if(rollCnt==3){
		document.getElementById("rollButton").style.visibility = 'hidden';
		document.getElementById("goToGrading").innerHTML = "Grade Hand";
	}
	
	//update the view
	document.getElementById("turnCounter").innerHTML=("turn #: "+turnNum);
	document.getElementById("rollCounter").innerHTML=("Roll #: "+rollCnt);
}
function getGrade(){

	var resetStr=" ";

	//put the hand into an array to be passed into other functions
	var phand = [document.getElementById("die1").innerHTML,
				document.getElementById("die2").innerHTML,
				document.getElementById("die3").innerHTML,
				document.getElementById("die4").innerHTML,
				document.getElementById("die5").innerHTML];

	for (var j=0;j<5;j++){
		phand[j]=parseInt(phand[j]);
		console.log("The "+phand[j]+" element of the array");
	}

	//sort the array
	mrkSort(phand, 5);

	console.log("After the sort");

	for (var j=0;j<5;j++){
		console.log("The "+phand[j]+" element of the sorted array");
	}

	getChoices(phand);

}

//allows the player to see their choices 
function getChoices(hand){
	var str=" ";

	/*ouput dice to the console to make sure they are being interpreted correctly
	for(var i=0;i<5;i++){
		//output the values of the dice
		console.log("Die #"+(i+1)+": "+hand[i]);
		str+="<p>Die #: "+hand[i]+"</p>";
	}
	can I use a for in loop for this view?*/

	//Aces View
	if((SCORE_CARD["ACES"].isUsed==false)&&(getSumNum(hand,1)==0)){
		str+="<p id='Scratch'>1) Scratch Aces";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Aces can be scratched");
	}
	else if(SCORE_CARD["ACES"].isUsed==false){
		str+="<p id='radioOptions'>1) The Sum of Aces: "+getSumNum(hand,1);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Aces have not been scored");
	}
	else{
		str+="<p id='Used'>1) Aces Have been used</p>";
		console.log("Aces have been scored");
	}

	//Twos View
	if((SCORE_CARD["TWOS"].isUsed==false)&&(getSumNum(hand,2)==0)){
		str+="<p id='Scratch'>2) Scratch Twos";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Twos can be scratched");
	}
	else if(SCORE_CARD["TWOS"].isUsed==false){
		str+="<p id='radioOptions'>2) The Sum of Twos: "+getSumNum(hand,2);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Twos have not been scored");
	}
	else{
		str+="<p id='Used'>2) Twos have been used</p>";
		console.log("Twos have been scored");
	}

	//threes view
	if((SCORE_CARD["THREES"].isUsed==false)&&(getSumNum(hand,3)==0)){
		str+="<p id='Scratch'>3) Scratch Threes";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Threes can be scratched");
	}
	else if(SCORE_CARD["THREES"].isUsed==false){
		str+="<p id='radioOptions'>3) The Sum of Threes: "+getSumNum(hand,3);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Threes have not been scored");
	}
	else{
		str+="<p id='Used'>3) Threes have been used</p>";
		console.log("Threes have been scored");
	}

	//Fours view
	if((SCORE_CARD["FOURS"].isUsed==false)&&(getSumNum(hand,4)==0)){
		str+="<p id='Scratch'>4) Scratch Fours";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Fours can be scratched");
	}
	else if(SCORE_CARD["FOURS"].isUsed==false){
		str+="<p id='radioOptions'>4) The Sum of Fours: "+getSumNum(hand,4);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Fours have not been scored");
	}
	else{
		str+="<p id='Used'>4) Fours have been used</p>";
		console.log("Fours have been scored");
	}

	//Five view
	if((SCORE_CARD["FIVES"].isUsed==false)&&(getSumNum(hand,5)==0)){
		str+="<p id='Scratch'>5) Scratch Fives";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Fives can be scratched");
	}
	else if(SCORE_CARD["FIVES"].isUsed==false){
		str+="<p id='radioOptions'>5) The Sum of Fives: "+getSumNum(hand,5);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Fives have not been scored");
	}
	else{
		str+="<p id='Used'>5) Fives have been used</p>";
		console.log("Fives have been scored");
	}

	//Sixes view
	if((SCORE_CARD["SIXES"].isUsed==false)&&(getSumNum(hand,6)==0)){
		str+="<p id='radioOptions'>6) Scratch Sixes";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("A Sixes can be scratched");
	}
	else if(SCORE_CARD["SIXES"].isUsed==false){
		str+="<p id='radioOptions'>6) The Sum of Sixes: "+getSumNum(hand,6);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Sixes have not been scored");
	}
	else{
		str+="<p id='Used'>6) Sixes have been used</p>";
		console.log("Sixes have been scored");
	}

	//3 of a Kind view
	if((SCORE_CARD["KIND3"].isUsed==false)&&(is3Kind(hand)==true)){
		str+="<p id='radioOptions'>7) 3 of a Kind: "+getSum(hand);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("3 of a Kind can be scored");
	}
	else if(SCORE_CARD["KIND3"].isUsed==false){
		str+="<p id='Scratch'>7) Scratch 3 of a Kind";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("3 of a Kind can be scratched");
	}
	else{
		str+="<p id='Used'>7) 3 of a Kind has been used</p>";
		console.log("3 of a Kind has been scored");
	}

	//4 of a Kind view
	if((SCORE_CARD["KIND4"].isUsed==false)&&(is4Kind(hand)==true)){
		str+="<p id='radioOptions'>8) 4 of a Kind: "+getSum(hand);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("4 of a Kind can be scored");
	}
	else if(SCORE_CARD["KIND3"].isUsed==false){
		str+="<p id='Scratch'>8) Scratch 4 of a Kind";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("4 of a Kind can be scratched");
	}
	else{
		str+="<p id='Used'>8) 4 of a Kind has been used</p>";
		console.log("4 of a Kind has been scored");
	}

	//Full House view
	if((SCORE_CARD["FHOUSE"].isUsed==false)&&(isFull(hand)==true)){
		str+="<p id='radioOptions'>9) Full House: 25";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Full House can be scored");
	}
	else if(SCORE_CARD["FHOUSE"].isUsed==false){
		str+="<p id='Scratch'>9) Scratch Full House";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Full House can be scratched");
	}
	else{
		str+="<p id='Used'>9) Full House has been used</p>";
		console.log("Full House has been scored");
	}

	//Small Straight view
	if((SCORE_CARD["SS"].isUsed==false)&&(isSS(hand)==true)){
		str+="<p id='radioOptions'>10) Small Straight: 30";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Small Straight can be scored");
	}
	else if(SCORE_CARD["SS"].isUsed==false){
		str+="<p id='Scratch'>10) Scratch Small Straight";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Small Straight can be scratched");
	}
	else{
		str+="<p id='Used'>10) Small Straight has been used</p>";
		console.log("Small Straight has been scored");
	}

	//Large Straight view
	if((SCORE_CARD["LS"].isUsed==false)&&(isLS(hand)==true)){
		str+="<p id='radioOptions'>11) Large Straight: 40";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Large Straight can be scored");
	}
	else if(SCORE_CARD["LS"].isUsed==false){
		str+="<p id='Scratch'>11) Scratch Large Straight";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Large Straight can be scratched");
	}
	else{
		str+="<p id='Used'>11) Large Straight has been used</p>";
		console.log("Large Straight has been scored");
	}

	//Yahtzee view
	if((SCORE_CARD["YAHTZEE"].isUsed==false)&&(isY(hand)==true)){
		str+="<p id='radioOptions'>12) Yahtzee: 50";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Yahtzee can be scored");
	}
	else if(SCORE_CARD["YAHTZEE"].isUsed==false){
		str+="<p id='Scratch'>12) Scratch Yahtzee";
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Yahtzee can be scratched");
	}
	else{
		str+="<p id='Used'>12) Yahtzee has been used</p>";
		console.log("Yahtzee has been scored");
	}

	//Chance view
	if(SCORE_CARD["CHANCE"].isUsed==false){
		str+="<p id='radioOptions'>13) Chance: "+getSum(hand);
		str+="<input type='radio' name='radioScore'><br></p>";
		console.log("Chance can be scored");
	}
	else{
		str+="<p id='Used'>13) Yahtzee has been used</p>";
		console.log("Chance has been scored");
	}


	//increment the number of turns 
	turnNum++;

	//add the button to reset the game
	str+="<div id='gradingButton'><button id='resetButton' onclick='newTurn()'>Next Turn</button><br/>";

	//output the results into the grade section of the page
	document.getElementById("grading").innerHTML=str;

}

//returns the sum of all numbers
function getSum(H){
	var sum=0;

	for(var i=0;i<5;i++){
		sum+=H[i];
	}
	//output result to the console
	console.log("The Sum of your hand is: "+sum);

	//return the value
	return sum;
}

//returns the sum of all the numbers that are Num
function getSumNum(H,Num){
	var sum=0;

	for(var i=0;i<5;i++){
		if(H[i]==Num)sum+=H[i];
	}
	//output result to the console
	console.log("The Sum of "+Num+" are: "+sum);

	//return the value
	return sum;
}

//resets the page for a new turn
function newTurn(){
	var resetStr=" ";

	//reset the number of rolls
	rollCnt=0;

	//re-output the button
	resetStr+="<div id='rollMechButtons'><button id='rollButton' onclick='rollDice()'>Roll Dice</button><br/>";
	resetStr+="<button id='goToGrading' onclick='getGrade()'>Keep All</button></div>";

	document.getElementById("rollMechButtons").innerHTML=resetStr;
}

//mark sort function
function mrkSort(a, n){
    //nested for loop 
    for(var i=0;i<n;i++){
        for (var j=0;j<n;j++){
            if(a[i]<a[j]){
                a[i]=a[i]^a[j];
                a[j]=a[i]^a[j];
                a[i]=a[i]^a[j];
            }
        }
    }
}
function is3Kind(Arry){
    if ((Arry[0]==Arry[1]&&Arry[1]==Arry[2])||
            (Arry[2]==Arry[3]&&Arry[3]==Arry[4])){
        return true;
    }
    else{
        return false;
    }
}
function is4Kind(Arry){
    if ((Arry[0]==Arry[1]&&Arry[1]==Arry[2]&&Arry[2]==Arry[3])||
            (Arry[1]==Arry[2]&&Arry[2]==Arry[3]&&Arry[3]==Arry[4])){
        return true;
    }
    else{
        return false;
    }
}
function isFull(Arry){
    if (((Arry[0]==Arry[1]&&Arry[1]==Arry[2])&&(Arry[3]==Arry[4]))||
            ((Arry[2]==Arry[3]&&Arry[3]==Arry[4])&&(Arry[0]==Arry[1]))){
        return true;
    }
    else{
        return false;
    }
}
function isSS(Arry){
    var temp=new Array(5);
    var isOk=false;
    
    //create temp array
    for(var i=0;i<5;i++){
        temp[i]=Arry[i];
    }
    
    //move any doubles to the back of the array
    for(var j=0;j<(4);j++){
        if(temp[j]==Arry[j+1]){
            temp[j]=0;
        }
    }
    
    //sort the array
    mrkSort(temp, 5);
    
    //see if it fits into the small straight catagory
    if((temp[1]==(temp[2]-1))&&(temp[1]==(temp[3]-2))&&(temp[1]==(temp[4]-3))){
        isOk=true;
    }
    return isOk;
}
function isLS(Arry){
    if(((Arry[0]+1)==Arry[1])&&((Arry[0]+2)==Arry[2])&&
            ((Arry[0]+3)==Arry[3])&&((Arry[0]+4)==Arry[4])||
            (((Arry[1]+1)==Arry[2])&&((Arry[1]+2)==Arry[3])&&
            ((Arry[1]+3)==Arry[3])&&((Arry[1]+4)==Arry[4]))){
        return true;
    }
    else{
    	return false;
    }
}
function isY(Arry){
    if(Arry[0]==Arry[1]&&Arry[1]==Arry[2]&&Arry[2]==Arry[3]&&Arry[3]==Arry[4]){
        return true;
    }
    else {
    	return false;
    }
}
</script>
</head>
<body>
	<h1>Welcome to CIS 14A Yahtzee Made by Christopher Schaefer!</h1>
	<div id="mechRoll">
		<h2 id="turnCounter">Turn #: </h2>
		<h3 id="rollCounter">Roll #: </h3>
		<h3>Your Hand:</h3>
		<div id="dieLabels">
			<form>
				<div id="die1" class="dice"></div><br />
				<input id="d1" type="checkbox" name="rr1" value="">
				<p>Die #1</p>
				<div id="die2" class="dice"></div><br />
				<input id="d2" type="checkbox" name="rr1" value="">
				<p>Die #2</p>
				<div id="die3" class="dice"></div><br />
				<input id="d3" type="checkbox" name="rr1" value="">
				<p>Die #3</p>
				<div id="die4" class="dice"></div><br />
				<input id="d4" type="checkbox" name="rr1" value="">
				<p>Die #4</p>
				<div id="die5" class="dice"></div><br />
				<input id="d5" type="checkbox" name="rr1" value="">
				<p>Die #5</p>
			</form>	
		</div>
		<div id="rollMechButtons">
			<button id="rollButton" onclick="rollDice()">Roll Dice</button><br />
			<button id="goToGrading" onclick="getGrade()">Keep All</button>
		</div>
	</div>
	<div id="grading"><form id="gradingForm"></form></div>
</body>
</html>